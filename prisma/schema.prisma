generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  profile   Profile?
  foodLogs  FoodLog[]
}

model Profile {
  id            String   @id @default(uuid())
  userId        String   @unique
  user          User     @relation(fields: [userId], references: [id])
  height        Float    // in cm
  weight        Float    // in kg
  activityLevel String   // sedentary, light, moderate, active, very_active
  goal          String   // lose_weight, maintain, gain_muscle
  gender        String
  birthDate     DateTime
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  likedFoods    String   @default("") // Comma separated list of food IDs or names
}

model FoodLog {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  date      DateTime
  mealType  String   // breakfast, lunch, dinner, snack
  foodName  String
  calories  Int
  protein   Float
  carbs     Float
  fat       Float
  createdAt DateTime @default(now())
}

model FoodItem {
  id             String   @id @default(uuid())
  name           String   @unique
  caloriesPer100g Int
  proteinPer100g Float
  carbsPer100g   Float
  fatPer100g     Float
  category       String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
